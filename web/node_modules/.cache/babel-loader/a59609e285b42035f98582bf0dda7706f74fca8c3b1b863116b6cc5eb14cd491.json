{"ast":null,"code":"import React,{useState,useRef,useEffect}from\"react\";import\"./register.css\";import Header from\"../../components/header/header.js\";import Footer from\"../../components/footer/footer.js\";import ErrorBox from\"../../components/errorBox/errorBox.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){const[user,setUser]=useState(\"\");const[pwd,setPwd]=useState(\"\");const[cpwd,setCpwd]=useState(\"\");const[message,setMessage]=useState(\"\");const userRef=useRef(null);const pwdRef=useRef(null);const cpwdRef=userRef(null);const handleSubmit=async event=>{event.preventDefault();try{var _response$headers$get;const response=await fetch('/api/user/register_process',{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:new URLSearchParams({'user':user,'pwd':pwd,'cpwd':cpwd})});if((_response$headers$get=response.headers.get('content-type'))!==null&&_response$headers$get!==void 0&&_response$headers$get.includes('application/json')){const data=await response.json();if(response.ok){console.log(\"Register successful:\",data);setMessage(\"Register successful\");window.location.href='/login';}else{console.error(\"Register failed:\",data.msg);setMessage(data.msg||\"Register failed due to unknown error.\");}}else{const text=await response.text();console.error(\"Unexpected response format:\",text);setMessage(\"An error occurred. Please try again later.\");}}catch(error){console.error('Error during login:',error);setMessage(\"An error occurred. Please try again later.\");}};function error_notifier(){switch(message){case\"Password cannot less than 6\":pwdRef.current.style.boxShadow='0 2px 10px 2px #FF0056';userRef.current.style.boxShadow='0 2px 10px 2px #999999';cpwdRef.current.style.boxShadow='0 2px 10px 2px #999999';break;case\"two Password fields not match\":pwdRef.current.style.boxShadow='0 2px 10px 2px #999999';userRef.current.style.boxShadow='0 2px 10px 2px #999999';cpwdRef.current.style.boxShadow='0 2px 10px 2px #FF0056';break;case\"Invalid username format: The length of username only accepts 5 to 20\":userRef.current.style.boxShadow='0 2px 10px 2px #FF0056';pwdRef.current.style.boxShadow='0 2px 10px 2px #999999';cpwdRef.current.style.boxShadow='0 2px 10px 2px #999999';break;case\"Invalid username format: Username only accepts letters, numbers and underline\":userRef.current.style.boxShadow='0 2px 10px 2px #FF0056';pwdRef.current.style.boxShadow='0 2px 10px 2px #999999';cpwdRef.current.style.boxShadow='0 2px 10px 2px #999999';break;case\"Name exist\":userRef.current.style.boxShadow='0 2px 10px 2px #FF0056';pwdRef.current.style.boxShadow='0 2px 10px 2px #999999';cpwdRef.current.style.boxShadow='0 2px 10px 2px #999999';break;default:break;}}useEffect(()=>{error_notifier();},[message]);return/*#__PURE__*/_jsxs(\"div\",{className:\"register\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Header,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"frame\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"register_sub\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Register\"}),/*#__PURE__*/_jsx(\"div\",{className:\"biao\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"myForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{id:\"boxs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"box1\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username: \"}),/*#__PURE__*/_jsx(\"label\",{children:\"Password: \"}),/*#__PURE__*/_jsx(\"label\",{children:\"Confirm Password: \"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"box2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"user\",value:user,ref:userRef,onChange:e=>setUser(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"pwd\",value:pwd,ref:pwdRef,onChange:e=>setPwd(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"cpwd\",value:cpwd,ref:cpwdRef,onChange:e=>setCpwd(e.target.value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container2\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"button\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"button__line\"}),/*#__PURE__*/_jsx(\"div\",{className:\"button__line\"}),/*#__PURE__*/_jsx(\"span\",{className:\"button__text\",children:\"Register\"})]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/login\",id:\"go_to_login\",children:\"I already had an account. I want to login!\"})})]})]})})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Footer,{})}),/*#__PURE__*/_jsx(\"div\",{id:\"error_box\",children:/*#__PURE__*/_jsx(ErrorBox,{message:message})})]});}export default Register;","map":{"version":3,"names":["React","useState","useRef","useEffect","Header","Footer","ErrorBox","jsx","_jsx","jsxs","_jsxs","Register","user","setUser","pwd","setPwd","cpwd","setCpwd","message","setMessage","userRef","pwdRef","cpwdRef","handleSubmit","event","preventDefault","_response$headers$get","response","fetch","method","headers","body","URLSearchParams","get","includes","data","json","ok","console","log","window","location","href","error","msg","text","error_notifier","current","style","boxShadow","className","children","id","onSubmit","type","name","value","ref","onChange","e","target"],"sources":["/Users/kaileying/Documents/Repos/BinLTools_Gin/web/src/pages/register/register.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport \"./register.css\";\nimport Header from \"../../components/header/header.js\";\nimport Footer from \"../../components/footer/footer.js\";\nimport ErrorBox from \"../../components/errorBox/errorBox.js\";\n\nfunction Register() {\n    const [user, setUser] = useState(\"\");\n    const [pwd, setPwd] = useState(\"\");\n    const [cpwd, setCpwd] = useState(\"\");\n    const [message, setMessage] = useState(\"\");\n    const userRef = useRef(null);\n    const pwdRef = useRef(null);\n    const cpwdRef = userRef(null)\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n\n        try {\n            const response = await fetch('/api/user/register_process', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded',\n                },\n                body: new URLSearchParams({\n                    'user': user,\n                    'pwd': pwd,\n                    'cpwd': cpwd\n                })\n            });\n\n            if (response.headers.get('content-type')?.includes('application/json')) {\n                const data = await response.json();\n                if (response.ok) {\n                    console.log(\"Register successful:\", data);\n                    setMessage(\"Register successful\");\n                    window.location.href = '/login';\n                } else {\n                    console.error(\"Register failed:\", data.msg);\n                    setMessage(data.msg || \"Register failed due to unknown error.\");\n                }\n            } else {\n                const text = await response.text();\n                console.error(\"Unexpected response format:\", text);\n                setMessage(\"An error occurred. Please try again later.\");\n            }\n        } catch (error) {\n            console.error('Error during login:', error);\n            setMessage(\"An error occurred. Please try again later.\");\n        }\n    };\n\n    function error_notifier() {\n        switch (message) {\n            case \"Password cannot less than 6\":\n                pwdRef.current.style.boxShadow = '0 2px 10px 2px #FF0056';\n                userRef.current.style.boxShadow = '0 2px 10px 2px #999999';\n                cpwdRef.current.style.boxShadow = '0 2px 10px 2px #999999';\n                break;\n\n            case \"two Password fields not match\":\n                pwdRef.current.style.boxShadow = '0 2px 10px 2px #999999';\n                userRef.current.style.boxShadow = '0 2px 10px 2px #999999';\n                cpwdRef.current.style.boxShadow = '0 2px 10px 2px #FF0056';\n                break;\n\n            case \"Invalid username format: The length of username only accepts 5 to 20\":\n                userRef.current.style.boxShadow = '0 2px 10px 2px #FF0056';\n                pwdRef.current.style.boxShadow = '0 2px 10px 2px #999999';\n                cpwdRef.current.style.boxShadow = '0 2px 10px 2px #999999';\n                break;\n\n            case \"Invalid username format: Username only accepts letters, numbers and underline\":\n                userRef.current.style.boxShadow = '0 2px 10px 2px #FF0056';\n                pwdRef.current.style.boxShadow = '0 2px 10px 2px #999999';\n                cpwdRef.current.style.boxShadow = '0 2px 10px 2px #999999';\n                break;\n\n            case \"Name exist\":\n                userRef.current.style.boxShadow = '0 2px 10px 2px #FF0056';\n                pwdRef.current.style.boxShadow = '0 2px 10px 2px #999999';\n                cpwdRef.current.style.boxShadow = '0 2px 10px 2px #999999';\n                break;\n\n            default:\n                break;\n        }\n    }\n\n    useEffect(() => {\n        error_notifier();\n    }, [message]);\n\n    return (\n        <div className=\"register\">\n            {/* Import Header */}\n            <div>\n                <Header />\n            </div>\n\n            <div className=\"frame\">\n                <div className='register_sub'>\n                    <div className='title'>Register</div>\n                    <div className='biao'>\n                        <form id=\"myForm\" onSubmit={handleSubmit}>\n                            <div id=\"boxs\">\n                                <div className=\"box1\">\n                                    <label>Username: </label>\n                                    <label>Password: </label>\n                                    <label>Confirm Password: </label>\n                                </div>\n                                <div className=\"box2\">\n                                    <input\n                                        type=\"text\"\n                                        name=\"user\"\n                                        value={user}\n                                        ref={userRef}\n                                        onChange={(e) => setUser(e.target.value)}\n                                    />\n                                    <input\n                                        type=\"password\"\n                                        name=\"pwd\"\n                                        value={pwd}\n                                        ref={pwdRef}\n                                        onChange={(e) => setPwd(e.target.value)}\n                                    />\n                                    <input\n                                        type=\"password\"\n                                        name=\"cpwd\"\n                                        value={cpwd}\n                                        ref={cpwdRef}\n                                        onChange={(e) => setCpwd(e.target.value)}\n                                    />\n                                </div>\n                            </div>\n                            <div className=\"container2\">\n                                <button type=\"submit\" className=\"button\">\n                                    <div className=\"button__line\"></div>\n                                    <div className=\"button__line\"></div>\n                                    <span className=\"button__text\">Register</span>\n                                </button>\n                                <p><a href=\"/login\" id=\"go_to_login\">I already had an account. I want to login!</a></p>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n\n            {/* Import Footer */}\n            <div>\n                <Footer />\n            </div>\n\n            {/* Import errorBox */}\n            <div id=\"error_box\">\n                {<ErrorBox message={message} />}\n            </div>\n        </div>\n    );\n}\n\nexport default Register;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}