{"ast":null,"code":"// const PIXI = require('./l2d/pixi.min.js')\n// const LIVE2DCUBISMFRAMEWORK = require('./live2dcubismframework.js')\nimport Live2DCubismCore from \"https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js\";\nimport PIXI from \"./frame/pixi.min.js\";\nimport LIVE2DCUBISMFRAMEWORK from \"./live2dcubismframework.js\";\nimport \"./live2dcubismpixi.js\";\nimport LIVE2DCUBISMPIXI from \"./live2dcubismpixi.js\";\n// import PIXI from\n\nclass L2D {\n  constructor(basePath) {\n    this.basePath = basePath;\n    this.loader = new PIXI.loaders.Loader(this.basePath);\n    this.animatorBuilder = new LIVE2DCUBISMFRAMEWORK.AnimatorBuilder();\n    this.timeScale = 1;\n    this.models = {};\n    //建立一个触发事件（触摸，加载等）和动作的对应表\n    this.TriggerMotions = new Map();\n    //建立一个触发区域和对应动作的对应表\n    this.TapAreas = new Map();\n  }\n  setPhysics3Json(value) {\n    if (!this.physicsRigBuilder) {\n      this.physicsRigBuilder = new LIVE2DCUBISMFRAMEWORK.PhysicsRigBuilder();\n    }\n    this.physicsRigBuilder.setPhysics3Json(value);\n    return this;\n  }\n  load(name, v) {\n    console.log(\"loading:\", name);\n    if (!this.models[name]) {\n      let modelDir = name + '/';\n      let modelPath = name + '.model3.json';\n      let textures = [];\n      let textureCount = 0;\n      let motionNames = [];\n      let modelNames = [];\n      let _ = this;\n\n      //if (!modelNames.includes(name+'_model')){\n      this.loader.add(name + '_model', modelDir + modelPath, {\n        xhrType: PIXI.loaders.Resource.XHR_RESPONSE_TYPE.JSON\n      });\n      modelNames.push(name + '_model');\n      //}\n\n      this.loader.load((loader, resources) => {\n        let model3Obj = resources[name + '_model'].data;\n        if (typeof model3Obj['FileReferences']['Moc'] !== \"undefined\") {\n          loader.add(name + '_moc', modelDir + model3Obj['FileReferences']['Moc'], {\n            xhrType: PIXI.loaders.Resource.XHR_RESPONSE_TYPE.BUFFER\n          });\n        }\n        if (typeof model3Obj['FileReferences']['Textures'] !== \"undefined\") {\n          model3Obj['FileReferences']['Textures'].forEach(element => {\n            loader.add(name + '_texture' + textureCount, modelDir + element);\n            textureCount++;\n          });\n        }\n        if (typeof model3Obj['FileReferences']['Physics'] !== \"undefined\") {\n          loader.add(name + '_physics', modelDir + model3Obj['FileReferences']['Physics'], {\n            xhrType: PIXI.loaders.Resource.XHR_RESPONSE_TYPE.JSON\n          });\n        }\n        if (typeof model3Obj['FileReferences']['Motions'] !== \"undefined\") {\n          for (let group in model3Obj['FileReferences']['Motions']) {\n            var groupmotionNames = [];\n            model3Obj['FileReferences']['Motions'][group].forEach(element => {\n              let motionName = element['File'].split('/').pop().split('.').shift();\n              if (!motionNames.includes(motionName)) {\n                loader.add(motionName, modelDir + element['File'], {\n                  xhrType: PIXI.loaders.Resource.XHR_RESPONSE_TYPE.JSON\n                });\n                motionNames.push(motionName);\n              } else {\n                var n = motionName + String(Date.now());\n                loader.add(n, modelDir + element['File'], {\n                  xhrType: PIXI.loaders.Resource.XHR_RESPONSE_TYPE.JSON\n                });\n                motionNames.push(motionName);\n              }\n              groupmotionNames.push(motionName);\n            });\n            _.TriggerMotions.set(group, groupmotionNames);\n          }\n        }\n        let groups = null;\n        // 原始代码好像不太对劲。。typeof的括号位置不对\n        // if (typeof(model3Obj['Groups'] !== \"undefined\")) {\n        //     groups = LIVE2DCUBISMFRAMEWORK.Groups.fromModel3Json(model3Obj);\n        // }\n        if (typeof model3Obj['Groups'] !== 'undefined') {\n          groups = LIVE2DCUBISMFRAMEWORK.Groups.fromModel3Json(model3Obj);\n        }\n        //从HitAreas配置中拿到点击区域和动作的对应关系，输入格式为\n        /*\n        // \"HitAreas\": [\n        //     {\n        //       \"Id\": \"TouchBody\",\n        //       \"Motion\": \"TapBody\"\n        //     },\n        //    {\n        //       \"Id\": \"TouchHead\",\n        //       \"Motion\": \"TapHead:touch_head,main\"\n        //     }\n        // ]\n        */\n        if (typeof model3Obj['HitAreas'] !== 'undefined') {\n          let tempHitAreas = model3Obj['HitAreas'];\n          //按Order排序，Order值越大，越靠前，没有Order的设置为默认值0\n          tempHitAreas.forEach(e => {\n            if (!e.Order) {\n              e.Order = 0;\n            }\n          });\n          tempHitAreas.sort(function (a, b) {\n            return b.Order - a.Order;\n          });\n          console.log(tempHitAreas);\n          tempHitAreas.forEach(e => {\n            let [MotionsGroup, MotionsItems] = e.Motion.split(':');\n            if (MotionsItems) {\n              _.TapAreas.set(e.Id, MotionsItems.split(','));\n            } else {\n              _.TapAreas.set(e.Id, _.TriggerMotions.get(MotionsGroup));\n            }\n          });\n        }\n        loader.load((l, r) => {\n          let moc = null;\n          if (typeof r[name + '_moc'] !== \"undefined\") {\n            moc = Live2DCubismCore.Moc.fromArrayBuffer(r[name + '_moc'].data);\n            if (moc == null) {\n              console.log(\"null1111\");\n            }\n          }\n          if (typeof r[name + '_texture' + 0] !== \"undefined\") {\n            for (let i = 0; i < textureCount; i++) {\n              textures.splice(i, 0, r[name + '_texture' + i].texture);\n            }\n          }\n          if (typeof r[name + '_physics'] !== \"undefined\") {\n            this.setPhysics3Json(r[name + '_physics'].data);\n          }\n          //这里只是把加载了动作数据和动作名，没有把动作和触发事件联系起来\n          let motions = new Map();\n          motionNames.forEach(e => {\n            motions.set(e, LIVE2DCUBISMFRAMEWORK.Animation.fromMotion3Json(r[e].data));\n          });\n          let model = null;\n          let coreModel = Live2DCubismCore.Model.fromMoc(moc);\n          if (coreModel == null) {\n            return;\n          }\n          let animator = this.animatorBuilder.setTarget(coreModel).setTimeScale(this.timeScale).build();\n          let physicsRig = this.physicsRigBuilder.setTarget(coreModel).setTimeScale(this.timeScale).build();\n          let userData = null;\n          model = LIVE2DCUBISMPIXI.Model._create(coreModel, textures, animator, physicsRig, userData, groups);\n          model.motions = motions;\n          this.models[name] = model;\n          v.changeCanvas(model);\n        });\n      });\n    } else {\n      v.changeCanvas(this.models[name]);\n    }\n  }\n}\nexport default L2D;","map":{"version":3,"names":["Live2DCubismCore","PIXI","LIVE2DCUBISMFRAMEWORK","LIVE2DCUBISMPIXI","L2D","constructor","basePath","loader","loaders","Loader","animatorBuilder","AnimatorBuilder","timeScale","models","TriggerMotions","Map","TapAreas","setPhysics3Json","value","physicsRigBuilder","PhysicsRigBuilder","load","name","v","console","log","modelDir","modelPath","textures","textureCount","motionNames","modelNames","_","add","xhrType","Resource","XHR_RESPONSE_TYPE","JSON","push","resources","model3Obj","data","BUFFER","forEach","element","group","groupmotionNames","motionName","split","pop","shift","includes","n","String","Date","now","set","groups","Groups","fromModel3Json","tempHitAreas","e","Order","sort","a","b","MotionsGroup","MotionsItems","Motion","Id","get","l","r","moc","Moc","fromArrayBuffer","i","splice","texture","motions","Animation","fromMotion3Json","model","coreModel","Model","fromMoc","animator","setTarget","setTimeScale","build","physicsRig","userData","_create","changeCanvas"],"sources":["/Users/kaileying/Documents/Repos/BinLTools_Gin/web/src/components/live2dWigit/l2d.js"],"sourcesContent":["// const PIXI = require('./l2d/pixi.min.js')\n// const LIVE2DCUBISMFRAMEWORK = require('./live2dcubismframework.js')\nimport Live2DCubismCore from \"https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js\"\nimport PIXI from \"./frame/pixi.min.js\"\nimport LIVE2DCUBISMFRAMEWORK from \"./live2dcubismframework.js\"\nimport \"./live2dcubismpixi.js\"\nimport LIVE2DCUBISMPIXI from \"./live2dcubismpixi.js\"\n// import PIXI from\n\n\nclass L2D {\n    constructor(basePath) {\n        this.basePath = basePath;\n        this.loader = new PIXI.loaders.Loader(this.basePath);\n        this.animatorBuilder = new LIVE2DCUBISMFRAMEWORK.AnimatorBuilder();\n        this.timeScale = 1;\n        this.models = {};\n        //建立一个触发事件（触摸，加载等）和动作的对应表\n        this.TriggerMotions = new Map();\n        //建立一个触发区域和对应动作的对应表\n        this.TapAreas = new Map();\n\n    }\n\n    setPhysics3Json(value) {\n        if (!this.physicsRigBuilder) {\n            this.physicsRigBuilder = new LIVE2DCUBISMFRAMEWORK.PhysicsRigBuilder();\n        }\n        this.physicsRigBuilder.setPhysics3Json(value);\n\n        return this;\n    }\n\n    load(name, v) {\n        console.log(\"loading:\", name)\n        if (!this.models[name]) {\n            let modelDir = name + '/';\n            let modelPath = name + '.model3.json';\n            let textures = [];\n            let textureCount = 0;\n            let motionNames = [];\n            let modelNames = [];\n            let _ = this;\n\n            //if (!modelNames.includes(name+'_model')){\n            this.loader.add(name + '_model', modelDir + modelPath, {xhrType: PIXI.loaders.Resource.XHR_RESPONSE_TYPE.JSON});\n            modelNames.push(name + '_model');\n            //}\n\n            this.loader.load((loader, resources) => {\n                let model3Obj = resources[name + '_model'].data;\n                if (typeof (model3Obj['FileReferences']['Moc']) !== \"undefined\") {\n                    loader.add(name + '_moc', modelDir + model3Obj['FileReferences']['Moc'], {xhrType: PIXI.loaders.Resource.XHR_RESPONSE_TYPE.BUFFER});\n                }\n\n                if (typeof (model3Obj['FileReferences']['Textures']) !== \"undefined\") {\n                    model3Obj['FileReferences']['Textures'].forEach((element) => {\n                        loader.add(name + '_texture' + textureCount, modelDir + element);\n                        textureCount++;\n                    });\n                }\n\n                if (typeof (model3Obj['FileReferences']['Physics']) !== \"undefined\") {\n                    loader.add(name + '_physics', modelDir + model3Obj['FileReferences']['Physics'], {xhrType: PIXI.loaders.Resource.XHR_RESPONSE_TYPE.JSON});\n                }\n                if (typeof (model3Obj['FileReferences']['Motions']) !== \"undefined\") {\n                    for (let group in model3Obj['FileReferences']['Motions']) {\n                        var groupmotionNames = [];\n                        model3Obj['FileReferences']['Motions'][group].forEach((element) => {\n\n                            let motionName = element['File'].split('/').pop().split('.').shift();\n                            if (!motionNames.includes(motionName)) {\n                                loader.add(motionName, modelDir + element['File'], {xhrType: PIXI.loaders.Resource.XHR_RESPONSE_TYPE.JSON});\n                                motionNames.push(motionName);\n                            } else {\n                                var n = motionName + String(Date.now());\n                                loader.add(n, modelDir + element['File'], {xhrType: PIXI.loaders.Resource.XHR_RESPONSE_TYPE.JSON});\n                                motionNames.push(motionName);\n                            }\n                            groupmotionNames.push(motionName)\n                        });\n                        _.TriggerMotions.set(group, groupmotionNames)\n\n                    }\n                }\n\n                let groups = null;\n                // 原始代码好像不太对劲。。typeof的括号位置不对\n                // if (typeof(model3Obj['Groups'] !== \"undefined\")) {\n                //     groups = LIVE2DCUBISMFRAMEWORK.Groups.fromModel3Json(model3Obj);\n                // }\n                if (typeof (model3Obj['Groups']) !== 'undefined') {\n                    groups = LIVE2DCUBISMFRAMEWORK.Groups.fromModel3Json(model3Obj);\n                }\n                //从HitAreas配置中拿到点击区域和动作的对应关系，输入格式为\n                /*\n                // \"HitAreas\": [\n                //     {\n                //       \"Id\": \"TouchBody\",\n                //       \"Motion\": \"TapBody\"\n                //     },\n                //    {\n                //       \"Id\": \"TouchHead\",\n                //       \"Motion\": \"TapHead:touch_head,main\"\n                //     }\n                // ]\n                */\n                if (typeof (model3Obj['HitAreas']) !== 'undefined') {\n                    let tempHitAreas = model3Obj['HitAreas'];\n                    //按Order排序，Order值越大，越靠前，没有Order的设置为默认值0\n                    tempHitAreas.forEach((e) => {\n                        if (!e.Order) {\n                            e.Order = 0\n                        }\n                    })\n                    tempHitAreas.sort(function (a, b) {\n                        return b.Order - a.Order\n                    });\n                    console.log(tempHitAreas);\n                    tempHitAreas.forEach((e) => {\n                        let [MotionsGroup, MotionsItems] = e.Motion.split(':')\n                        if (MotionsItems) {\n                            _.TapAreas.set(e.Id, MotionsItems.split(','))\n                        } else {\n                            _.TapAreas.set(e.Id, _.TriggerMotions.get(MotionsGroup))\n                        }\n                    })\n                }\n                loader.load((l, r) => {\n                    let moc = null;\n                    if (typeof (r[name + '_moc']) !== \"undefined\") {\n                        moc = Live2DCubismCore.Moc.fromArrayBuffer(r[name + '_moc'].data);\n                        if (moc == null) {\n                            console.log(\"null1111\")\n                        }\n                    }\n\n                    if (typeof (r[name + '_texture' + 0]) !== \"undefined\") {\n                        for (let i = 0; i < textureCount; i++) {\n                            textures.splice(i, 0, r[name + '_texture' + i].texture);\n                        }\n                    }\n\n                    if (typeof (r[name + '_physics']) !== \"undefined\") {\n                        this.setPhysics3Json(r[name + '_physics'].data);\n                    }\n                    //这里只是把加载了动作数据和动作名，没有把动作和触发事件联系起来\n                    let motions = new Map();\n                    motionNames.forEach((e) => {\n                        motions.set(e, LIVE2DCUBISMFRAMEWORK.Animation.fromMotion3Json(r[e].data));\n                    });\n\n                    let model = null;\n\n                    let coreModel = Live2DCubismCore.Model.fromMoc(moc);\n\n                    if (coreModel == null) {\n                        return;\n                    }\n\n                    let animator = this.animatorBuilder\n                        .setTarget(coreModel)\n                        .setTimeScale(this.timeScale)\n                        .build();\n                    let physicsRig = this.physicsRigBuilder\n                        .setTarget(coreModel)\n                        .setTimeScale(this.timeScale)\n                        .build();\n\n                    let userData = null;\n\n                    model = LIVE2DCUBISMPIXI.Model._create(coreModel, textures, animator, physicsRig, userData, groups);\n                    model.motions = motions;\n                    this.models[name] = model;\n\n                    v.changeCanvas(model);\n                });\n            });\n        } else {\n            v.changeCanvas(this.models[name]);\n        }\n    }\n}\n\nexport default L2D;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}