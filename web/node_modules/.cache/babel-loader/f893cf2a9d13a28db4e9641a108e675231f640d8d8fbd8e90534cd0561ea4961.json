{"ast":null,"code":"// const PIXI = require('./l2d/pixi.min.js')\n// const LIVE2DCUBISMFRAMEWORK = require('./live2dcubismframework.js')\nimport Live2DCubismCore from \"../../../public/libs/live2dcubismcore.min.js\";\nimport LIVE2DCUBISMFRAMEWORK from \"./live2dcubismframework.js\";\nimport LIVE2DCUBISMPIXI from \"./live2dcubismpixi.js\";\nimport { Loader, LoaderResource } from '@pixi/loaders';\n// import PIXI from\n\nclass L2D {\n  constructor(basePath) {\n    this.basePath = basePath;\n    this.loader = new Loader();\n    this.animatorBuilder = new LIVE2DCUBISMFRAMEWORK.AnimatorBuilder();\n    this.timeScale = 1;\n    this.models = {};\n    //建立一个触发事件（触摸，加载等）和动作的对应表\n    this.TriggerMotions = new Map();\n    //建立一个触发区域和对应动作的对应表\n    this.TapAreas = new Map();\n  }\n  setPhysics3Json(value) {\n    if (!this.physicsRigBuilder) {\n      this.physicsRigBuilder = new LIVE2DCUBISMFRAMEWORK.PhysicsRigBuilder();\n    }\n    this.physicsRigBuilder.setPhysics3Json(value);\n    return this;\n  }\n  load(name, v) {\n    console.log(\"loading:\", name);\n    if (!this.models[name]) {\n      let modelDir = this.basePath + '/' + name + '/';\n      let modelPath = name + '.model3.json';\n      let textures = [];\n      let textureCount = 0;\n      let motionNames = [];\n      let modelNames = [];\n      let _ = this;\n\n      //if (!modelNames.includes(name+'_model')){\n      this.loader.add(name + '_model', modelDir + modelPath, {\n        xhrType: LoaderResource.XHR_RESPONSE_TYPE.JSON\n      });\n      modelNames.push(name + '_model');\n      //}\n\n      this.loader.onError.add(error => {\n        console.error(`Error loading resource: ${error.message}`);\n      });\n      this.loader.load((loader, resources) => {\n        let model3Resource = resources[name + '_model'];\n        if (!model3Resource || !model3Resource.data) {\n          console.error(`Failed to load model resource: ${name + '_model'}`);\n          return;\n        }\n        let model3Obj = model3Resource.data;\n        if (typeof model3Obj['FileReferences']['Moc'] !== \"undefined\") {\n          loader.add(name + '_moc', modelDir + model3Obj['FileReferences']['Moc'], {\n            xhrType: LoaderResource.XHR_RESPONSE_TYPE.BUFFER\n          });\n        }\n        if (typeof model3Obj['FileReferences']['Textures'] !== \"undefined\") {\n          model3Obj['FileReferences']['Textures'].forEach(element => {\n            loader.add(name + '_texture' + textureCount, modelDir + element);\n            textureCount++;\n          });\n        }\n        if (typeof model3Obj['FileReferences']['Physics'] !== \"undefined\") {\n          loader.add(name + '_physics', modelDir + model3Obj['FileReferences']['Physics'], {\n            xhrType: LoaderResource.XHR_RESPONSE_TYPE.JSON\n          });\n        }\n        if (typeof model3Obj['FileReferences']['Motions'] !== \"undefined\") {\n          for (let group in model3Obj['FileReferences']['Motions']) {\n            var groupmotionNames = [];\n            model3Obj['FileReferences']['Motions'][group].forEach(element => {\n              let motionName = element['File'].split('/').pop().split('.').shift();\n              if (!motionNames.includes(motionName)) {\n                loader.add(motionName, modelDir + element['File'], {\n                  xhrType: LoaderResource.XHR_RESPONSE_TYPE.JSON\n                });\n                motionNames.push(motionName);\n              } else {\n                var n = motionName + String(Date.now());\n                loader.add(n, modelDir + element['File'], {\n                  xhrType: LoaderResource.XHR_RESPONSE_TYPE.JSON\n                });\n                motionNames.push(motionName);\n              }\n              groupmotionNames.push(motionName);\n            });\n            _.TriggerMotions.set(group, groupmotionNames);\n          }\n        }\n        let groups = null;\n        // 原始代码好像不太对劲。。typeof的括号位置不对\n        // if (typeof(model3Obj['Groups'] !== \"undefined\")) {\n        //     groups = LIVE2DCUBISMFRAMEWORK.Groups.fromModel3Json(model3Obj);\n        // }\n        if (typeof model3Obj['Groups'] !== 'undefined') {\n          groups = LIVE2DCUBISMFRAMEWORK.Groups.fromModel3Json(model3Obj);\n        }\n        //从HitAreas配置中拿到点击区域和动作的对应关系，输入格式为\n        /*\n        // \"HitAreas\": [\n        //     {\n        //       \"Id\": \"TouchBody\",\n        //       \"Motion\": \"TapBody\"\n        //     },\n        //    {\n        //       \"Id\": \"TouchHead\",\n        //       \"Motion\": \"TapHead:touch_head,main\"\n        //     }\n        // ]\n        */\n        if (typeof model3Obj['HitAreas'] !== 'undefined') {\n          let tempHitAreas = model3Obj['HitAreas'];\n          //按Order排序，Order值越大，越靠前，没有Order的设置为默认值0\n          tempHitAreas.forEach(e => {\n            if (!e.Order) {\n              e.Order = 0;\n            }\n          });\n          tempHitAreas.sort(function (a, b) {\n            return b.Order - a.Order;\n          });\n          console.log(tempHitAreas);\n          tempHitAreas.forEach(e => {\n            let [MotionsGroup, MotionsItems] = e.Motion.split(':');\n            if (MotionsItems) {\n              _.TapAreas.set(e.Id, MotionsItems.split(','));\n            } else {\n              _.TapAreas.set(e.Id, _.TriggerMotions.get(MotionsGroup));\n            }\n          });\n        }\n        loader.load((l, r) => {\n          let moc = null;\n          console.log(Live2DCubismCore);\n          if (typeof r[name + '_moc'] !== \"undefined\") {\n            moc = Live2DCubismCore.Moc.fromArrayBuffer(r[name + '_moc'].data);\n            if (moc == null) {\n              console.log(\"null1111\");\n            }\n          }\n          if (typeof r[name + '_texture' + 0] !== \"undefined\") {\n            for (let i = 0; i < textureCount; i++) {\n              textures.splice(i, 0, r[name + '_texture' + i].texture);\n            }\n          }\n          if (typeof r[name + '_physics'] !== \"undefined\") {\n            this.setPhysics3Json(r[name + '_physics'].data);\n          }\n          //这里只是把加载了动作数据和动作名，没有把动作和触发事件联系起来\n          let motions = new Map();\n          motionNames.forEach(e => {\n            motions.set(e, LIVE2DCUBISMFRAMEWORK.Animation.fromMotion3Json(r[e].data));\n          });\n          let model = null;\n          let coreModel = Live2DCubismCore.Model.fromMoc(moc);\n          if (coreModel == null) {\n            return;\n          }\n          let animator = this.animatorBuilder.setTarget(coreModel).setTimeScale(this.timeScale).build();\n          let physicsRig = this.physicsRigBuilder.setTarget(coreModel).setTimeScale(this.timeScale).build();\n          let userData = null;\n          model = LIVE2DCUBISMPIXI.Model._create(coreModel, textures, animator, physicsRig, userData, groups);\n          model.motions = motions;\n          this.models[name] = model;\n          v.changeCanvas(model);\n        });\n      });\n    } else {\n      v.changeCanvas(this.models[name]);\n    }\n  }\n}\nexport default L2D;","map":{"version":3,"names":["Live2DCubismCore","LIVE2DCUBISMFRAMEWORK","LIVE2DCUBISMPIXI","Loader","LoaderResource","L2D","constructor","basePath","loader","animatorBuilder","AnimatorBuilder","timeScale","models","TriggerMotions","Map","TapAreas","setPhysics3Json","value","physicsRigBuilder","PhysicsRigBuilder","load","name","v","console","log","modelDir","modelPath","textures","textureCount","motionNames","modelNames","_","add","xhrType","XHR_RESPONSE_TYPE","JSON","push","onError","error","message","resources","model3Resource","data","model3Obj","BUFFER","forEach","element","group","groupmotionNames","motionName","split","pop","shift","includes","n","String","Date","now","set","groups","Groups","fromModel3Json","tempHitAreas","e","Order","sort","a","b","MotionsGroup","MotionsItems","Motion","Id","get","l","r","moc","Moc","fromArrayBuffer","i","splice","texture","motions","Animation","fromMotion3Json","model","coreModel","Model","fromMoc","animator","setTarget","setTimeScale","build","physicsRig","userData","_create","changeCanvas"],"sources":["/Users/kaileying/Documents/Repos/BinLTools_Gin/web/src/components/live2dWigit/l2d.js"],"sourcesContent":["// const PIXI = require('./l2d/pixi.min.js')\n// const LIVE2DCUBISMFRAMEWORK = require('./live2dcubismframework.js')\nimport Live2DCubismCore from \"../../../public/libs/live2dcubismcore.min.js\"\nimport LIVE2DCUBISMFRAMEWORK from \"./live2dcubismframework.js\"\nimport LIVE2DCUBISMPIXI from \"./live2dcubismpixi.js\"\nimport { Loader, LoaderResource } from '@pixi/loaders';\n// import PIXI from\n\n\nclass L2D {\n    constructor(basePath) {\n        this.basePath = basePath;\n        this.loader = new Loader();\n        this.animatorBuilder = new LIVE2DCUBISMFRAMEWORK.AnimatorBuilder();\n        this.timeScale = 1;\n        this.models = {};\n        //建立一个触发事件（触摸，加载等）和动作的对应表\n        this.TriggerMotions = new Map();\n        //建立一个触发区域和对应动作的对应表\n        this.TapAreas = new Map();\n\n    }\n\n    setPhysics3Json(value) {\n        if (!this.physicsRigBuilder) {\n            this.physicsRigBuilder = new LIVE2DCUBISMFRAMEWORK.PhysicsRigBuilder();\n        }\n        this.physicsRigBuilder.setPhysics3Json(value);\n\n        return this;\n    }\n\n    load(name, v) {\n        console.log(\"loading:\", name)\n        if (!this.models[name]) {\n            let modelDir = this.basePath + '/' + name + '/';\n            let modelPath = name + '.model3.json';\n            let textures = [];\n            let textureCount = 0;\n            let motionNames = [];\n            let modelNames = [];\n            let _ = this;\n\n            //if (!modelNames.includes(name+'_model')){\n            this.loader.add(name + '_model', modelDir + modelPath, {xhrType: LoaderResource.XHR_RESPONSE_TYPE.JSON});\n            modelNames.push(name + '_model');\n            //}\n\n            this.loader.onError.add((error) => {\n                console.error(`Error loading resource: ${error.message}`);\n            });\n\n            this.loader.load((loader, resources) => {\n                let model3Resource = resources[name + '_model'];\n\n                if (!model3Resource || !model3Resource.data) {\n                    console.error(`Failed to load model resource: ${name + '_model'}`);\n                    return;\n                }\n\n                let model3Obj = model3Resource.data;\n\n                if (typeof (model3Obj['FileReferences']['Moc']) !== \"undefined\") {\n                    loader.add(name + '_moc', modelDir + model3Obj['FileReferences']['Moc'], {xhrType: LoaderResource.XHR_RESPONSE_TYPE.BUFFER});\n                }\n\n                if (typeof (model3Obj['FileReferences']['Textures']) !== \"undefined\") {\n                    model3Obj['FileReferences']['Textures'].forEach((element) => {\n                        loader.add(name + '_texture' + textureCount, modelDir + element);\n                        textureCount++;\n                    });\n                }\n\n                if (typeof (model3Obj['FileReferences']['Physics']) !== \"undefined\") {\n                    loader.add(name + '_physics', modelDir + model3Obj['FileReferences']['Physics'], {xhrType: LoaderResource.XHR_RESPONSE_TYPE.JSON});\n                }\n                if (typeof (model3Obj['FileReferences']['Motions']) !== \"undefined\") {\n                    for (let group in model3Obj['FileReferences']['Motions']) {\n                        var groupmotionNames = [];\n                        model3Obj['FileReferences']['Motions'][group].forEach((element) => {\n\n                            let motionName = element['File'].split('/').pop().split('.').shift();\n                            if (!motionNames.includes(motionName)) {\n                                loader.add(motionName, modelDir + element['File'], {xhrType: LoaderResource.XHR_RESPONSE_TYPE.JSON});\n                                motionNames.push(motionName);\n                            } else {\n                                var n = motionName + String(Date.now());\n                                loader.add(n, modelDir + element['File'], {xhrType: LoaderResource.XHR_RESPONSE_TYPE.JSON});\n                                motionNames.push(motionName);\n                            }\n                            groupmotionNames.push(motionName)\n                        });\n                        _.TriggerMotions.set(group, groupmotionNames)\n\n                    }\n                }\n\n                let groups = null;\n                // 原始代码好像不太对劲。。typeof的括号位置不对\n                // if (typeof(model3Obj['Groups'] !== \"undefined\")) {\n                //     groups = LIVE2DCUBISMFRAMEWORK.Groups.fromModel3Json(model3Obj);\n                // }\n                if (typeof (model3Obj['Groups']) !== 'undefined') {\n                    groups = LIVE2DCUBISMFRAMEWORK.Groups.fromModel3Json(model3Obj);\n                }\n                //从HitAreas配置中拿到点击区域和动作的对应关系，输入格式为\n                /*\n                // \"HitAreas\": [\n                //     {\n                //       \"Id\": \"TouchBody\",\n                //       \"Motion\": \"TapBody\"\n                //     },\n                //    {\n                //       \"Id\": \"TouchHead\",\n                //       \"Motion\": \"TapHead:touch_head,main\"\n                //     }\n                // ]\n                */\n                if (typeof (model3Obj['HitAreas']) !== 'undefined') {\n                    let tempHitAreas = model3Obj['HitAreas'];\n                    //按Order排序，Order值越大，越靠前，没有Order的设置为默认值0\n                    tempHitAreas.forEach((e) => {\n                        if (!e.Order) {\n                            e.Order = 0\n                        }\n                    })\n                    tempHitAreas.sort(function (a, b) {\n                        return b.Order - a.Order\n                    });\n                    console.log(tempHitAreas);\n                    tempHitAreas.forEach((e) => {\n                        let [MotionsGroup, MotionsItems] = e.Motion.split(':')\n                        if (MotionsItems) {\n                            _.TapAreas.set(e.Id, MotionsItems.split(','))\n                        } else {\n                            _.TapAreas.set(e.Id, _.TriggerMotions.get(MotionsGroup))\n                        }\n                    })\n                }\n                loader.load((l, r) => {\n                    let moc = null;\n                    console.log(Live2DCubismCore);\n                    if (typeof (r[name + '_moc']) !== \"undefined\") {\n                        moc = Live2DCubismCore.Moc.fromArrayBuffer(r[name + '_moc'].data);\n                        if (moc == null) {\n                            console.log(\"null1111\")\n                        }\n                    }\n\n                    if (typeof (r[name + '_texture' + 0]) !== \"undefined\") {\n                        for (let i = 0; i < textureCount; i++) {\n                            textures.splice(i, 0, r[name + '_texture' + i].texture);\n                        }\n                    }\n\n                    if (typeof (r[name + '_physics']) !== \"undefined\") {\n                        this.setPhysics3Json(r[name + '_physics'].data);\n                    }\n                    //这里只是把加载了动作数据和动作名，没有把动作和触发事件联系起来\n                    let motions = new Map();\n                    motionNames.forEach((e) => {\n                        \n                        motions.set(e, LIVE2DCUBISMFRAMEWORK.Animation.fromMotion3Json(r[e].data));\n                    });\n\n                    let model = null;\n\n                    let coreModel = Live2DCubismCore.Model.fromMoc(moc);\n\n                    if (coreModel == null) {\n                        return;\n                    }\n\n                    let animator = this.animatorBuilder\n                        .setTarget(coreModel)\n                        .setTimeScale(this.timeScale)\n                        .build();\n                    let physicsRig = this.physicsRigBuilder\n                        .setTarget(coreModel)\n                        .setTimeScale(this.timeScale)\n                        .build();\n\n                    let userData = null;\n\n                    model = LIVE2DCUBISMPIXI.Model._create(coreModel, textures, animator, physicsRig, userData, groups);\n                    model.motions = motions;\n                    this.models[name] = model;\n\n                    v.changeCanvas(model);\n                });\n            });\n        } else {\n            v.changeCanvas(this.models[name]);\n        }\n    }\n}\n\nexport default L2D;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}