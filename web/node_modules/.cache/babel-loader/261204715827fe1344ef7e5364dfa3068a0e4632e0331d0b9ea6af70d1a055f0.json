{"ast":null,"code":"import\"./userPage.css\";import React,{useEffect,useState}from'react';import Header from\"../../components/header/header.js\";import Footer from\"../../components/footer/footer.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UserPage(){const[userContent,setUserContent]=useState({});function EditID(value){if(value.length<7){return\"0\".repeat(7-value.length)+value;}return value;}function Logout(){try{var _response$headers$get;const response=fetch('/api/user/logout_process',{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:new URLSearchParams({'user':user,'pwd':pwd})});if((_response$headers$get=response.headers.get('content-type'))!==null&&_response$headers$get!==void 0&&_response$headers$get.includes('application/json')){const data=response.json();if(response.ok){console.log(\"Logout successful:\",data);window.location.href='/';}else{console.error(\"Logout failed:\",data.msg);}}else{const text=response.text();console.error(\"Unexpected response format:\",text);}}catch(error){console.error('Error during logout:',error);}}useEffect(()=>{// Get login data from backend\nfetch('/api/user/login').then(response=>{if(!response.ok){throw new Error('Network response was not ok');}return response.json();}).then(data=>{console.log(\"Login data received:\",data);data.id=EditID(data.id);setUserContent(data);}).catch(error=>console.error('Error fetching data:',error));},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"user_page\",children:[/*#__PURE__*/_jsx(\"div\",{children:Header()}),/*#__PURE__*/_jsxs(\"div\",{className:\"main_container\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"user_name\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"xxlarge_text\",children:userContent.username}),/*#__PURE__*/_jsxs(\"p\",{className:\"medium_text\",children:[\"#\",userContent.id]})]}),/*#__PURE__*/_jsx(\"div\",{id:\"log_out\",children:/*#__PURE__*/_jsx(\"button\",{className:\"log_out\",type:\"button\",title:\"Logout\",onClick:Logout,children:\"Logout\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:Footer()})]});}export default UserPage;","map":{"version":3,"names":["React","useEffect","useState","Header","Footer","jsx","_jsx","jsxs","_jsxs","UserPage","userContent","setUserContent","EditID","value","length","repeat","Logout","_response$headers$get","response","fetch","method","headers","body","URLSearchParams","user","pwd","get","includes","data","json","ok","console","log","window","location","href","error","msg","text","then","Error","id","catch","className","children","username","type","title","onClick"],"sources":["/Users/kaileying/Documents/Repos/BinLTools_Gin/web/src/pages/userPage/userPage.js"],"sourcesContent":["import \"./userPage.css\"\nimport React, { useEffect, useState } from 'react';\nimport Header from \"../../components/header/header.js\"\nimport Footer from \"../../components/footer/footer.js\"\n\nfunction UserPage() {\n    const [userContent, setUserContent] = useState({});\n\n    function EditID(value) {\n        if (value.length < 7) {\n            return \"0\".repeat(7 - value.length) + value;\n        }\n        return value;\n    }\n\n    function Logout() {\n        try {\n            const response = fetch('/api/user/logout_process', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded',\n                },\n                body: new URLSearchParams({\n                    'user': user,\n                    'pwd': pwd\n                })\n            });            \n            \n            if (response.headers.get('content-type')?.includes('application/json')) {\n                const data = response.json();\n                if (response.ok) {\n                    console.log(\"Logout successful:\", data);\n                    window.location.href = '/';\n                } else {\n                    console.error(\"Logout failed:\", data.msg);\n                }\n            } else {\n                const text = response.text();\n                console.error(\"Unexpected response format:\", text);\n            }\n        } catch (error) {\n            console.error('Error during logout:', error);\n        }\n    }\n\n    useEffect(() => {\n        // Get login data from backend\n        fetch('/api/user/login')\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error('Network response was not ok');\n                }\n                return response.json();\n            })\n            .then(data => {\n                console.log(\"Login data received:\", data);\n                data.id = EditID(data.id)\n                setUserContent(data);\n            })\n            .catch(error => console.error('Error fetching data:', error));\n    }, []);\n\n    return (\n        <div className=\"user_page\">\n            {/* Import Header */}\n            <div>\n                { Header() }\n            </div>\n\n            <div className=\"main_container\">\n                <div id=\"user_name\">\n                    <p className=\"xxlarge_text\">{userContent.username}</p>\n                    <p className=\"medium_text\">#{userContent.id}</p>\n                </div>\n\n                {/* <div id=\"main_panel\">\n                    <div className=\"info_container\">\n                        <p className=\"info\"></p>\n                    </div>\n                </div> */}\n\n                <div id=\"log_out\">\n                    <button className=\"log_out\" type=\"button\" title=\"Logout\" onClick={Logout}>\n                        Logout\n                    </button>\n                </div>\n            </div>\n\n            {/* Import Footer */}\n            <div>\n                { Footer() }\n            </div>\n        </div>\n    );\n}\n\nexport default UserPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}