{"ast":null,"code":"import \"./frame/pixi.min.js\";\nimport \"./live2dcubismframework.js\";\nimport \"./live2dcubismpixi.js\";\nimport L2D from \"./live2dWigit/l2d.js\";\nclass Viewer {\n  constructor(config) {\n    let width = config.width || 800;\n    let height = config.height || 600;\n    let role = config.role;\n    let left = config.left; //|| '0px'\n    let top = config.top; //|| '0px'\n    let right = config.right; //|| '0px'\n    let bottom = config.bottom; //|| '0px'\n    let bg = config.background;\n    let opa = config.opacity;\n    let mobile = config.mobile;\n    let _ = this;\n    if (!mobile) {\n      if (this.isMobile()) return;\n    }\n    this.l2d = new L2D(config.basePath);\n    this.canvas = document.getElementById(\"L2dCanvas\");\n    this.l2d.load(role, this);\n    this.app = new PIXI.Application({\n      width: width,\n      height: height,\n      transparent: true,\n      antialias: true // 抗锯齿\n    });\n    this.canvas.appendChild(this.app.view);\n    this.canvas.style.position = 'fixed';\n    if (bg) {\n      this.canvas.style.background = `url(\"${bg}\")`;\n      this.canvas.style.backgroundSize = 'cover';\n    }\n    if (opa) this.canvas.style.opacity = opa;\n    if (top) this.canvas.style.top = top;\n    if (right) this.canvas.style.right = right;\n    if (bottom) this.canvas.style.bottom = bottom;\n    if (left) this.canvas.style.left = left;\n    this.app.ticker.add(deltaTime => {\n      if (!this.model) {\n        return;\n      }\n      this.model.update(_, deltaTime);\n      this.model.masks.update(this.app.renderer);\n    });\n    //窗口大小改变时重绘\n    window.onresize = event => {\n      if (event === void 0) {\n        event = null;\n      }\n      this.app.view.style.width = width + \"px\";\n      this.app.view.style.height = height + \"px\";\n      this.app.renderer.resize(width, height);\n      if (this.model) {\n        this.model.position = new PIXI.Point(width * 0.4, height * 0.6);\n        this.model.scale = new PIXI.Point(this.model.position.x * 2, this.model.position.x * 2);\n        this.model.masks.resize(this.app.view.width, this.app.view.height);\n      }\n    };\n    this.isClick = false;\n    window.addEventListener('mousedown', event => {\n      this.isClick = true;\n    });\n\n    //Change the mouse range to full web screen\n    window.addEventListener('mousemove', event => {\n      this.isClick = false;\n      if (this.model) {\n        this.model.inDrag = true;\n      }\n      if (this.model) {\n        // let mouse_x = this.model.position.x - event.offsetX;\n        // let mouse_y = this.model.position.y - event.offsetY;\n        let model_x = this.model.position.x + width / 2;\n        let model_y = this.model.position.y + height / 2;\n        this.model.pointerX = (event.clientX - (window.innerWidth / 2 - model_x)) / window.innerWidth * 2 - 1;\n        this.model.pointerY = -(-((event.clientY - (window.innerHeight / 2 - model_y)) / window.innerHeight) * 2 + 1);\n      }\n    });\n    window.addEventListener('mouseup', event => {\n      if (!this.model) {\n        return;\n      }\n      this.isClick = true;\n      let templatestr = '';\n      let i = 0;\n      console.log(this.l2d.TapAreas);\n      if (this.l2d.TapAreas) {\n        for (let item of this.l2d.TapAreas) {\n          console.log(item);\n          templatestr = templatestr + (i == 0 ? \"if\" : \"else if\");\n          if (item[0]) {\n            templatestr = templatestr + `(this.isHit(\"` + item[0] + `\", event.offsetX, event.offsetY)) {\n                        this.startAnimation(\"` + item[1][0] + `\", \"base\")\n                    }`;\n          }\n          i++;\n        }\n      }\n      eval(templatestr);\n      this.isClick = false;\n      this.model.inDrag = false;\n    });\n    console.log(\"Init finished.\");\n  }\n  //每次载入模型时触发\n  changeCanvas(model) {\n    this.app.stage.removeChildren();\n    model.motions.forEach((value, key) => {\n      if (key != \"effect\") {\n        let btn = document.createElement(\"button\");\n        let label = document.createTextNode(key);\n        btn.appendChild(label);\n        btn.className = \"btnGenericText\";\n        btn.addEventListener(\"click\", () => {\n          this.startAnimation(key, \"base\");\n        });\n      }\n    });\n    this.model = model;\n    this.model.update = this.onUpdate; // HACK: use hacked update fn for drag support\n    this.model.animator.addLayer(\"base\", LIVE2DCUBISMFRAMEWORK.BuiltinAnimationBlenders.OVERRIDE, 1);\n    this.app.stage.addChild(this.model);\n    this.app.stage.addChild(this.model.masks);\n    //如果有载入动画，触发载入动画\n    if (this.l2d.TriggerMotions.get('Start')) {\n      this.startAnimation(this.l2d.TriggerMotions.get('Start')[0], \"base\");\n    }\n    window.onresize();\n  }\n  //\n  onUpdate(_, delta) {\n    let deltaTime = 0.016 * delta;\n    if (!this.animator.isPlaying) {\n      let m = this.motions.get(\"idle\");\n      console.log(_.l2d.TriggerMotions.get('Idle')[0]);\n      this.animator.getLayer(\"base\").play(m);\n    }\n    this._animator.updateAndEvaluate(deltaTime);\n    if (this.inDrag) {\n      this.addParameterValueById(\"ParamAngleX\", this.pointerX * 30);\n      this.addParameterValueById(\"ParamAngleY\", -this.pointerY * 30);\n      this.addParameterValueById(\"ParamBodyAngleX\", this.pointerX * 10);\n      this.addParameterValueById(\"ParamBodyAngleY\", -this.pointerY * 10);\n      this.addParameterValueById(\"ParamEyeBallX\", this.pointerX);\n      this.addParameterValueById(\"ParamEyeBallY\", -this.pointerY);\n    }\n    if (this._physicsRig) {\n      this._physicsRig.updateAndEvaluate(deltaTime);\n    }\n    this._coreModel.update();\n    let sort = false;\n    for (let m = 0; m < this._meshes.length; ++m) {\n      this._meshes[m].alpha = this._coreModel.drawables.opacities[m];\n      this._meshes[m].visible = Live2DCubismCore.Utils.hasIsVisibleBit(this._coreModel.drawables.dynamicFlags[m]);\n      if (Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(this._coreModel.drawables.dynamicFlags[m])) {\n        this._meshes[m].vertices = this._coreModel.drawables.vertexPositions[m];\n        this._meshes[m].dirtyVertex = true;\n      }\n      if (Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(this._coreModel.drawables.dynamicFlags[m])) {\n        sort = true;\n      }\n    }\n    if (sort) {\n      this.children.sort((a, b) => {\n        let aIndex = this._meshes.indexOf(a);\n        let bIndex = this._meshes.indexOf(b);\n        let aRenderOrder = this._coreModel.drawables.renderOrders[aIndex];\n        let bRenderOrder = this._coreModel.drawables.renderOrders[bIndex];\n        return aRenderOrder - bRenderOrder;\n      });\n    }\n    this._coreModel.drawables.resetDynamicFlags();\n  }\n  startAnimation(motionId, layerId) {\n    if (!this.model) {\n      return;\n    }\n    let m = this.model.motions.get(motionId);\n    if (!m) {\n      return;\n    }\n    let l = this.model.animator.getLayer(layerId);\n    if (!l) {\n      return;\n    }\n    l.play(m);\n  }\n  isHit(id, posX, posY) {\n    if (!this.model) {\n      return false;\n    }\n    let _meshesname = [];\n    this.model._meshes.forEach(e => {\n      _meshesname.push(e.name);\n    });\n    let m = this.model.getModelMeshById(id);\n    if (!m) {\n      return false;\n    }\n    const vertexOffset = 0;\n    const vertexStep = 2;\n    const vertices = m.vertices;\n    let left = vertices[0];\n    let right = vertices[0];\n    let top = vertices[1];\n    let bottom = vertices[1];\n    for (let i = 1; i < 4; ++i) {\n      let x = vertices[vertexOffset + i * vertexStep];\n      let y = vertices[vertexOffset + i * vertexStep + 1];\n      if (x < left) {\n        left = x;\n      }\n      if (x > right) {\n        right = x;\n      }\n      if (y < top) {\n        top = y;\n      }\n      if (y > bottom) {\n        bottom = y;\n      }\n    }\n    let mouse_x = m.worldTransform.tx - posX;\n    let mouse_y = m.worldTransform.ty - posY;\n    let tx = -mouse_x / m.worldTransform.a;\n    let ty = -mouse_y / m.worldTransform.d;\n    return left <= tx && tx <= right && top <= ty && ty <= bottom;\n  }\n  isMobile() {\n    var WIN = window;\n    var LOC = WIN[\"location\"];\n    var NA = WIN.navigator;\n    var UA = NA.userAgent.toLowerCase();\n    function test(needle) {\n      return needle.test(UA);\n    }\n    var IsAndroid = test(/android|htc/) || /linux/i.test(NA.platform + \"\");\n    var IsIPhone = !IsAndroid && test(/ipod|iphone/);\n    var IsWinPhone = test(/windows phone/);\n    var device = {\n      IsAndroid: IsAndroid,\n      IsIPhone: IsIPhone,\n      IsWinPhone: IsWinPhone\n    };\n    var documentElement = WIN.document.documentElement;\n    for (var i in device) {\n      if (device[i]) {\n        documentElement.className += \" \" + i.replace(\"Is\", \"\").toLowerCase();\n      }\n    }\n    return device.IsAndroid || device.IsIPhone || device.IsWinPhone;\n  }\n}\nexport default Viewer;","map":{"version":3,"names":["L2D","Viewer","constructor","config","width","height","role","left","top","right","bottom","bg","background","opa","opacity","mobile","_","isMobile","l2d","basePath","canvas","document","getElementById","load","app","PIXI","Application","transparent","antialias","appendChild","view","style","position","backgroundSize","ticker","add","deltaTime","model","update","masks","renderer","window","onresize","event","resize","Point","scale","x","isClick","addEventListener","inDrag","model_x","model_y","y","pointerX","clientX","innerWidth","pointerY","clientY","innerHeight","templatestr","i","console","log","TapAreas","item","eval","changeCanvas","stage","removeChildren","motions","forEach","value","key","btn","createElement","label","createTextNode","className","startAnimation","onUpdate","animator","addLayer","LIVE2DCUBISMFRAMEWORK","BuiltinAnimationBlenders","OVERRIDE","addChild","TriggerMotions","get","delta","isPlaying","m","getLayer","play","_animator","updateAndEvaluate","addParameterValueById","_physicsRig","_coreModel","sort","_meshes","length","alpha","drawables","opacities","visible","Live2DCubismCore","Utils","hasIsVisibleBit","dynamicFlags","hasVertexPositionsDidChangeBit","vertices","vertexPositions","dirtyVertex","hasRenderOrderDidChangeBit","children","a","b","aIndex","indexOf","bIndex","aRenderOrder","renderOrders","bRenderOrder","resetDynamicFlags","motionId","layerId","l","isHit","id","posX","posY","_meshesname","e","push","name","getModelMeshById","vertexOffset","vertexStep","mouse_x","worldTransform","tx","mouse_y","ty","d","WIN","LOC","NA","navigator","UA","userAgent","toLowerCase","test","needle","IsAndroid","platform","IsIPhone","IsWinPhone","device","documentElement","replace"],"sources":["/Users/kaileying/Documents/Repos/BinLTools_Gin/web/src/components/live2dWigit/main.js"],"sourcesContent":["import \"./frame/pixi.min.js\"\nimport \"./live2dcubismframework.js\"\nimport \"./live2dcubismpixi.js\"\nimport L2D from \"./live2dWigit/l2d.js\"\n\nclass Viewer {\n    constructor (config) {\n        let width = config.width || 800\n        let height = config.height || 600\n        let role = config.role\n        let left = config.left //|| '0px'\n        let top = config.top //|| '0px'\n        let right = config.right //|| '0px'\n        let bottom = config.bottom //|| '0px'\n        let bg = config.background\n        let opa = config.opacity\n        let mobile = config.mobile\n        let _ = this\n\n        if(!mobile){\n            if(this.isMobile()) return;\n        } \n        this.l2d = new L2D(config.basePath);\n        this.canvas = document.getElementById(\"L2dCanvas\");\n        this.l2d.load(role, this);\n\n        this.app = new PIXI.Application({\n            width: width,\n            height: height,\n            transparent: true,\n            antialias: true // 抗锯齿\n        });\n\n        this.canvas.appendChild(this.app.view);\n        this.canvas.style.position = 'fixed'\n        if(bg){\n            this.canvas.style.background = `url(\"${bg}\")`\n            this.canvas.style.backgroundSize = 'cover'\n        }\n        if(opa)\n            this.canvas.style.opacity = opa\n        if(top)\n            this.canvas.style.top = top\n        if(right)\n            this.canvas.style.right = right\n        if(bottom)\n            this.canvas.style.bottom = bottom\n        if(left)\n            this.canvas.style.left = left\n\n        this.app.ticker.add((deltaTime) => {\n            if (!this.model) {\n                return;\n            }\n\n            this.model.update(_,deltaTime);\n            this.model.masks.update(this.app.renderer);\n        });\n        //窗口大小改变时重绘\n        window.onresize = (event) => {\n            if (event === void 0) { event = null; }\n\n            this.app.view.style.width = width + \"px\";\n            this.app.view.style.height = height + \"px\";\n            this.app.renderer.resize(width, height);\n\n            if (this.model) {\n                this.model.position = new PIXI.Point((width * 0.4), (height * 0.6));\n                this.model.scale = new PIXI.Point((this.model.position.x * 2), (this.model.position.x * 2));\n                this.model.masks.resize(this.app.view.width, this.app.view.height);\n            }\n\n        };\n        this.isClick = false;\n        window.addEventListener('mousedown', (event) => {\n            this.isClick = true;\n        });\n\n        //Change the mouse range to full web screen\n        window.addEventListener('mousemove', (event) => {\n            this.isClick = false;\n            if (this.model) {\n                    this.model.inDrag = true;\n            }\n\n            if (this.model) {\n                // let mouse_x = this.model.position.x - event.offsetX;\n                // let mouse_y = this.model.position.y - event.offsetY;\n                let model_x = this.model.position.x + width / 2\n                let model_y = this.model.position.y + height / 2\n                this.model.pointerX = (((event.clientX - (window.innerWidth / 2 - model_x)) / window.innerWidth) * 2 - 1);\n                this.model.pointerY = -(-((event.clientY - (window.innerHeight / 2 -model_y)) / window.innerHeight) * 2 + 1);\n            }\n        });\n        window.addEventListener('mouseup', (event) => {\n            if (!this.model) {\n                return;\n            }\n            this.isClick = true;\n            let templatestr = ''\n            let i = 0\n            console.log(this.l2d.TapAreas);\n            if (this.l2d.TapAreas){\n                for(let item of this.l2d.TapAreas){\n                    console.log(item)\n                    templatestr=templatestr+(i==0?\"if\":\"else if\")\n                    if (item[0]){\n                        templatestr=templatestr+\n                    `(this.isHit(\"`+item[0]+`\", event.offsetX, event.offsetY)) {\n                        this.startAnimation(\"`+item[1][0]+`\", \"base\")\n                    }`\n                    }\n                    i++\n                }\n            }\n            eval(templatestr);\n            this.isClick = false;\n            this.model.inDrag = false;\n        });\n        console.log(\"Init finished.\")\n    }\n    //每次载入模型时触发\n    changeCanvas (model) {\n        this.app.stage.removeChildren();\n        \n        model.motions.forEach((value, key) => {\n            if (key != \"effect\") {\n                let btn = document.createElement(\"button\");\n                let label = document.createTextNode(key);\n                btn.appendChild(label);\n                btn.className = \"btnGenericText\";\n                btn.addEventListener(\"click\", () => {\n                    this.startAnimation(key, \"base\");\n                });\n            }\n        });\n\n        this.model = model;\n        this.model.update = this.onUpdate; // HACK: use hacked update fn for drag support\n        this.model.animator.addLayer(\"base\", LIVE2DCUBISMFRAMEWORK.BuiltinAnimationBlenders.OVERRIDE, 1);\n\n        this.app.stage.addChild(this.model);\n        this.app.stage.addChild(this.model.masks);\n        //如果有载入动画，触发载入动画\n        if(this.l2d.TriggerMotions.get('Start')){\n            this.startAnimation(this.l2d.TriggerMotions.get('Start')[0], \"base\")\n        }\n\n        window.onresize();\n    }\n    //\n    onUpdate (_,delta) {\n        let deltaTime = 0.016 * delta;\n        if (!this.animator.isPlaying) {\n            let m = this.motions.get(\"idle\");\n            console.log( _.l2d.TriggerMotions.get('Idle')[0]);\n            this.animator.getLayer(\"base\").play(m);\n        }\n        this._animator.updateAndEvaluate(deltaTime);\n\n        if (this.inDrag) {\n            this.addParameterValueById(\"ParamAngleX\", this.pointerX * 30);\n            this.addParameterValueById(\"ParamAngleY\", -this.pointerY * 30);\n            this.addParameterValueById(\"ParamBodyAngleX\", this.pointerX * 10);\n            this.addParameterValueById(\"ParamBodyAngleY\", -this.pointerY * 10);\n            this.addParameterValueById(\"ParamEyeBallX\", this.pointerX);\n            this.addParameterValueById(\"ParamEyeBallY\", -this.pointerY);\n        }\n\n        if (this._physicsRig) {\n            this._physicsRig.updateAndEvaluate(deltaTime);\n        }\n\n        this._coreModel.update();\n\n        let sort = false;\n        for (let m = 0; m < this._meshes.length; ++m) {\n            this._meshes[m].alpha = this._coreModel.drawables.opacities[m];\n            this._meshes[m].visible = Live2DCubismCore.Utils.hasIsVisibleBit(this._coreModel.drawables.dynamicFlags[m]);\n            if (Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(this._coreModel.drawables.dynamicFlags[m])) {\n                this._meshes[m].vertices = this._coreModel.drawables.vertexPositions[m];\n                this._meshes[m].dirtyVertex = true;\n            }\n            if (Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(this._coreModel.drawables.dynamicFlags[m])) {\n                sort = true;\n            }\n        }\n\n        if (sort) {\n            this.children.sort((a, b) => {\n                let aIndex = this._meshes.indexOf(a);\n                let bIndex = this._meshes.indexOf(b);\n                let aRenderOrder = this._coreModel.drawables.renderOrders[aIndex];\n                let bRenderOrder = this._coreModel.drawables.renderOrders[bIndex];\n\n                return aRenderOrder - bRenderOrder;\n            });\n        }\n\n        this._coreModel.drawables.resetDynamicFlags();\n    }\n\n    startAnimation (motionId, layerId) {\n        if (!this.model) {\n            return;\n        }\n        let m = this.model.motions.get(motionId);\n        \n        if (!m) {\n            return;\n        }\n\n        let l = this.model.animator.getLayer(layerId);\n        if (!l) {\n            return;\n        }\n\n        l.play(m);\n    }\n\n    isHit (id, posX, posY) {\n        if (!this.model) {\n            return false;\n        }\n        let _meshesname = []\n        this.model._meshes.forEach((e)=>{\n            _meshesname.push(e.name)\n        })\n        let m = this.model.getModelMeshById(id);\n        if (!m) {\n            return false;\n        }\n\n        const vertexOffset = 0;\n        const vertexStep = 2;\n        const vertices = m.vertices;\n\n        let left = vertices[0];\n        let right = vertices[0];\n        let top = vertices[1];\n        let bottom = vertices[1];\n\n        for (let i = 1; i < 4; ++i) {\n            let x = vertices[vertexOffset + i * vertexStep];\n            let y = vertices[vertexOffset + i * vertexStep + 1];\n\n            if (x < left) {\n                left = x;\n            }\n            if (x > right) {\n                right = x;\n            }\n            if (y < top) {\n                top = y;\n            }\n            if (y > bottom) {\n                bottom = y;\n            }\n        }\n\n        let mouse_x = m.worldTransform.tx - posX;\n        let mouse_y = m.worldTransform.ty - posY;\n        let tx = -mouse_x / m.worldTransform.a;\n        let ty = -mouse_y / m.worldTransform.d;\n\n        return ((left <= tx) && (tx <= right) && (top <= ty) && (ty <= bottom));\n    }\n\n    isMobile(){\n        var WIN = window;\n        var LOC = WIN[\"location\"];\n        var NA = WIN.navigator;\n        var UA = NA.userAgent.toLowerCase();\n\n        function test(needle) {\n          return needle.test(UA);\n        }        \n        var IsAndroid = test(/android|htc/) || /linux/i.test(NA.platform + \"\");\n        var IsIPhone = !IsAndroid && test(/ipod|iphone/);\n        var IsWinPhone = test(/windows phone/);\n\n        var device = {\n            IsAndroid: IsAndroid,\n            IsIPhone: IsIPhone,\n            IsWinPhone: IsWinPhone\n        }\n        var documentElement = WIN.document.documentElement;\n        for (var i in device) {\n            if (device[i]) {\n                documentElement.className += \" \" + i.replace(\"Is\", \"\").toLowerCase();\n            }\n        }\n        return device.IsAndroid || device.IsIPhone || device.IsWinPhone\n    }\n\n}\n\nexport default Viewer;\n"],"mappings":"AAAA,OAAO,qBAAqB;AAC5B,OAAO,4BAA4B;AACnC,OAAO,uBAAuB;AAC9B,OAAOA,GAAG,MAAM,sBAAsB;AAEtC,MAAMC,MAAM,CAAC;EACTC,WAAWA,CAAEC,MAAM,EAAE;IACjB,IAAIC,KAAK,GAAGD,MAAM,CAACC,KAAK,IAAI,GAAG;IAC/B,IAAIC,MAAM,GAAGF,MAAM,CAACE,MAAM,IAAI,GAAG;IACjC,IAAIC,IAAI,GAAGH,MAAM,CAACG,IAAI;IACtB,IAAIC,IAAI,GAAGJ,MAAM,CAACI,IAAI,EAAC;IACvB,IAAIC,GAAG,GAAGL,MAAM,CAACK,GAAG,EAAC;IACrB,IAAIC,KAAK,GAAGN,MAAM,CAACM,KAAK,EAAC;IACzB,IAAIC,MAAM,GAAGP,MAAM,CAACO,MAAM,EAAC;IAC3B,IAAIC,EAAE,GAAGR,MAAM,CAACS,UAAU;IAC1B,IAAIC,GAAG,GAAGV,MAAM,CAACW,OAAO;IACxB,IAAIC,MAAM,GAAGZ,MAAM,CAACY,MAAM;IAC1B,IAAIC,CAAC,GAAG,IAAI;IAEZ,IAAG,CAACD,MAAM,EAAC;MACP,IAAG,IAAI,CAACE,QAAQ,CAAC,CAAC,EAAE;IACxB;IACA,IAAI,CAACC,GAAG,GAAG,IAAIlB,GAAG,CAACG,MAAM,CAACgB,QAAQ,CAAC;IACnC,IAAI,CAACC,MAAM,GAAGC,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;IAClD,IAAI,CAACJ,GAAG,CAACK,IAAI,CAACjB,IAAI,EAAE,IAAI,CAAC;IAEzB,IAAI,CAACkB,GAAG,GAAG,IAAIC,IAAI,CAACC,WAAW,CAAC;MAC5BtB,KAAK,EAAEA,KAAK;MACZC,MAAM,EAAEA,MAAM;MACdsB,WAAW,EAAE,IAAI;MACjBC,SAAS,EAAE,IAAI,CAAC;IACpB,CAAC,CAAC;IAEF,IAAI,CAACR,MAAM,CAACS,WAAW,CAAC,IAAI,CAACL,GAAG,CAACM,IAAI,CAAC;IACtC,IAAI,CAACV,MAAM,CAACW,KAAK,CAACC,QAAQ,GAAG,OAAO;IACpC,IAAGrB,EAAE,EAAC;MACF,IAAI,CAACS,MAAM,CAACW,KAAK,CAACnB,UAAU,GAAI,QAAOD,EAAG,IAAG;MAC7C,IAAI,CAACS,MAAM,CAACW,KAAK,CAACE,cAAc,GAAG,OAAO;IAC9C;IACA,IAAGpB,GAAG,EACF,IAAI,CAACO,MAAM,CAACW,KAAK,CAACjB,OAAO,GAAGD,GAAG;IACnC,IAAGL,GAAG,EACF,IAAI,CAACY,MAAM,CAACW,KAAK,CAACvB,GAAG,GAAGA,GAAG;IAC/B,IAAGC,KAAK,EACJ,IAAI,CAACW,MAAM,CAACW,KAAK,CAACtB,KAAK,GAAGA,KAAK;IACnC,IAAGC,MAAM,EACL,IAAI,CAACU,MAAM,CAACW,KAAK,CAACrB,MAAM,GAAGA,MAAM;IACrC,IAAGH,IAAI,EACH,IAAI,CAACa,MAAM,CAACW,KAAK,CAACxB,IAAI,GAAGA,IAAI;IAEjC,IAAI,CAACiB,GAAG,CAACU,MAAM,CAACC,GAAG,CAAEC,SAAS,IAAK;MAC/B,IAAI,CAAC,IAAI,CAACC,KAAK,EAAE;QACb;MACJ;MAEA,IAAI,CAACA,KAAK,CAACC,MAAM,CAACtB,CAAC,EAACoB,SAAS,CAAC;MAC9B,IAAI,CAACC,KAAK,CAACE,KAAK,CAACD,MAAM,CAAC,IAAI,CAACd,GAAG,CAACgB,QAAQ,CAAC;IAC9C,CAAC,CAAC;IACF;IACAC,MAAM,CAACC,QAAQ,GAAIC,KAAK,IAAK;MACzB,IAAIA,KAAK,KAAK,KAAK,CAAC,EAAE;QAAEA,KAAK,GAAG,IAAI;MAAE;MAEtC,IAAI,CAACnB,GAAG,CAACM,IAAI,CAACC,KAAK,CAAC3B,KAAK,GAAGA,KAAK,GAAG,IAAI;MACxC,IAAI,CAACoB,GAAG,CAACM,IAAI,CAACC,KAAK,CAAC1B,MAAM,GAAGA,MAAM,GAAG,IAAI;MAC1C,IAAI,CAACmB,GAAG,CAACgB,QAAQ,CAACI,MAAM,CAACxC,KAAK,EAAEC,MAAM,CAAC;MAEvC,IAAI,IAAI,CAACgC,KAAK,EAAE;QACZ,IAAI,CAACA,KAAK,CAACL,QAAQ,GAAG,IAAIP,IAAI,CAACoB,KAAK,CAAEzC,KAAK,GAAG,GAAG,EAAIC,MAAM,GAAG,GAAI,CAAC;QACnE,IAAI,CAACgC,KAAK,CAACS,KAAK,GAAG,IAAIrB,IAAI,CAACoB,KAAK,CAAE,IAAI,CAACR,KAAK,CAACL,QAAQ,CAACe,CAAC,GAAG,CAAC,EAAI,IAAI,CAACV,KAAK,CAACL,QAAQ,CAACe,CAAC,GAAG,CAAE,CAAC;QAC3F,IAAI,CAACV,KAAK,CAACE,KAAK,CAACK,MAAM,CAAC,IAAI,CAACpB,GAAG,CAACM,IAAI,CAAC1B,KAAK,EAAE,IAAI,CAACoB,GAAG,CAACM,IAAI,CAACzB,MAAM,CAAC;MACtE;IAEJ,CAAC;IACD,IAAI,CAAC2C,OAAO,GAAG,KAAK;IACpBP,MAAM,CAACQ,gBAAgB,CAAC,WAAW,EAAGN,KAAK,IAAK;MAC5C,IAAI,CAACK,OAAO,GAAG,IAAI;IACvB,CAAC,CAAC;;IAEF;IACAP,MAAM,CAACQ,gBAAgB,CAAC,WAAW,EAAGN,KAAK,IAAK;MAC5C,IAAI,CAACK,OAAO,GAAG,KAAK;MACpB,IAAI,IAAI,CAACX,KAAK,EAAE;QACR,IAAI,CAACA,KAAK,CAACa,MAAM,GAAG,IAAI;MAChC;MAEA,IAAI,IAAI,CAACb,KAAK,EAAE;QACZ;QACA;QACA,IAAIc,OAAO,GAAG,IAAI,CAACd,KAAK,CAACL,QAAQ,CAACe,CAAC,GAAG3C,KAAK,GAAG,CAAC;QAC/C,IAAIgD,OAAO,GAAG,IAAI,CAACf,KAAK,CAACL,QAAQ,CAACqB,CAAC,GAAGhD,MAAM,GAAG,CAAC;QAChD,IAAI,CAACgC,KAAK,CAACiB,QAAQ,GAAK,CAACX,KAAK,CAACY,OAAO,IAAId,MAAM,CAACe,UAAU,GAAG,CAAC,GAAGL,OAAO,CAAC,IAAIV,MAAM,CAACe,UAAU,GAAI,CAAC,GAAG,CAAE;QACzG,IAAI,CAACnB,KAAK,CAACoB,QAAQ,GAAG,EAAE,EAAE,CAACd,KAAK,CAACe,OAAO,IAAIjB,MAAM,CAACkB,WAAW,GAAG,CAAC,GAAEP,OAAO,CAAC,IAAIX,MAAM,CAACkB,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;MAChH;IACJ,CAAC,CAAC;IACFlB,MAAM,CAACQ,gBAAgB,CAAC,SAAS,EAAGN,KAAK,IAAK;MAC1C,IAAI,CAAC,IAAI,CAACN,KAAK,EAAE;QACb;MACJ;MACA,IAAI,CAACW,OAAO,GAAG,IAAI;MACnB,IAAIY,WAAW,GAAG,EAAE;MACpB,IAAIC,CAAC,GAAG,CAAC;MACTC,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC7C,GAAG,CAAC8C,QAAQ,CAAC;MAC9B,IAAI,IAAI,CAAC9C,GAAG,CAAC8C,QAAQ,EAAC;QAClB,KAAI,IAAIC,IAAI,IAAI,IAAI,CAAC/C,GAAG,CAAC8C,QAAQ,EAAC;UAC9BF,OAAO,CAACC,GAAG,CAACE,IAAI,CAAC;UACjBL,WAAW,GAACA,WAAW,IAAEC,CAAC,IAAE,CAAC,GAAC,IAAI,GAAC,SAAS,CAAC;UAC7C,IAAII,IAAI,CAAC,CAAC,CAAC,EAAC;YACRL,WAAW,GAACA,WAAW,GAC1B,eAAc,GAACK,IAAI,CAAC,CAAC,CAAC,GAAE;AAC7C,8CAA8C,GAACA,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAE;AAC3D,sBAAsB;UACF;UACAJ,CAAC,EAAE;QACP;MACJ;MACAK,IAAI,CAACN,WAAW,CAAC;MACjB,IAAI,CAACZ,OAAO,GAAG,KAAK;MACpB,IAAI,CAACX,KAAK,CAACa,MAAM,GAAG,KAAK;IAC7B,CAAC,CAAC;IACFY,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;EACjC;EACA;EACAI,YAAYA,CAAE9B,KAAK,EAAE;IACjB,IAAI,CAACb,GAAG,CAAC4C,KAAK,CAACC,cAAc,CAAC,CAAC;IAE/BhC,KAAK,CAACiC,OAAO,CAACC,OAAO,CAAC,CAACC,KAAK,EAAEC,GAAG,KAAK;MAClC,IAAIA,GAAG,IAAI,QAAQ,EAAE;QACjB,IAAIC,GAAG,GAAGrD,QAAQ,CAACsD,aAAa,CAAC,QAAQ,CAAC;QAC1C,IAAIC,KAAK,GAAGvD,QAAQ,CAACwD,cAAc,CAACJ,GAAG,CAAC;QACxCC,GAAG,CAAC7C,WAAW,CAAC+C,KAAK,CAAC;QACtBF,GAAG,CAACI,SAAS,GAAG,gBAAgB;QAChCJ,GAAG,CAACzB,gBAAgB,CAAC,OAAO,EAAE,MAAM;UAChC,IAAI,CAAC8B,cAAc,CAACN,GAAG,EAAE,MAAM,CAAC;QACpC,CAAC,CAAC;MACN;IACJ,CAAC,CAAC;IAEF,IAAI,CAACpC,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACA,KAAK,CAACC,MAAM,GAAG,IAAI,CAAC0C,QAAQ,CAAC,CAAC;IACnC,IAAI,CAAC3C,KAAK,CAAC4C,QAAQ,CAACC,QAAQ,CAAC,MAAM,EAAEC,qBAAqB,CAACC,wBAAwB,CAACC,QAAQ,EAAE,CAAC,CAAC;IAEhG,IAAI,CAAC7D,GAAG,CAAC4C,KAAK,CAACkB,QAAQ,CAAC,IAAI,CAACjD,KAAK,CAAC;IACnC,IAAI,CAACb,GAAG,CAAC4C,KAAK,CAACkB,QAAQ,CAAC,IAAI,CAACjD,KAAK,CAACE,KAAK,CAAC;IACzC;IACA,IAAG,IAAI,CAACrB,GAAG,CAACqE,cAAc,CAACC,GAAG,CAAC,OAAO,CAAC,EAAC;MACpC,IAAI,CAACT,cAAc,CAAC,IAAI,CAAC7D,GAAG,CAACqE,cAAc,CAACC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC;IACxE;IAEA/C,MAAM,CAACC,QAAQ,CAAC,CAAC;EACrB;EACA;EACAsC,QAAQA,CAAEhE,CAAC,EAACyE,KAAK,EAAE;IACf,IAAIrD,SAAS,GAAG,KAAK,GAAGqD,KAAK;IAC7B,IAAI,CAAC,IAAI,CAACR,QAAQ,CAACS,SAAS,EAAE;MAC1B,IAAIC,CAAC,GAAG,IAAI,CAACrB,OAAO,CAACkB,GAAG,CAAC,MAAM,CAAC;MAChC1B,OAAO,CAACC,GAAG,CAAE/C,CAAC,CAACE,GAAG,CAACqE,cAAc,CAACC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;MACjD,IAAI,CAACP,QAAQ,CAACW,QAAQ,CAAC,MAAM,CAAC,CAACC,IAAI,CAACF,CAAC,CAAC;IAC1C;IACA,IAAI,CAACG,SAAS,CAACC,iBAAiB,CAAC3D,SAAS,CAAC;IAE3C,IAAI,IAAI,CAACc,MAAM,EAAE;MACb,IAAI,CAAC8C,qBAAqB,CAAC,aAAa,EAAE,IAAI,CAAC1C,QAAQ,GAAG,EAAE,CAAC;MAC7D,IAAI,CAAC0C,qBAAqB,CAAC,aAAa,EAAE,CAAC,IAAI,CAACvC,QAAQ,GAAG,EAAE,CAAC;MAC9D,IAAI,CAACuC,qBAAqB,CAAC,iBAAiB,EAAE,IAAI,CAAC1C,QAAQ,GAAG,EAAE,CAAC;MACjE,IAAI,CAAC0C,qBAAqB,CAAC,iBAAiB,EAAE,CAAC,IAAI,CAACvC,QAAQ,GAAG,EAAE,CAAC;MAClE,IAAI,CAACuC,qBAAqB,CAAC,eAAe,EAAE,IAAI,CAAC1C,QAAQ,CAAC;MAC1D,IAAI,CAAC0C,qBAAqB,CAAC,eAAe,EAAE,CAAC,IAAI,CAACvC,QAAQ,CAAC;IAC/D;IAEA,IAAI,IAAI,CAACwC,WAAW,EAAE;MAClB,IAAI,CAACA,WAAW,CAACF,iBAAiB,CAAC3D,SAAS,CAAC;IACjD;IAEA,IAAI,CAAC8D,UAAU,CAAC5D,MAAM,CAAC,CAAC;IAExB,IAAI6D,IAAI,GAAG,KAAK;IAChB,KAAK,IAAIR,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACS,OAAO,CAACC,MAAM,EAAE,EAAEV,CAAC,EAAE;MAC1C,IAAI,CAACS,OAAO,CAACT,CAAC,CAAC,CAACW,KAAK,GAAG,IAAI,CAACJ,UAAU,CAACK,SAAS,CAACC,SAAS,CAACb,CAAC,CAAC;MAC9D,IAAI,CAACS,OAAO,CAACT,CAAC,CAAC,CAACc,OAAO,GAAGC,gBAAgB,CAACC,KAAK,CAACC,eAAe,CAAC,IAAI,CAACV,UAAU,CAACK,SAAS,CAACM,YAAY,CAAClB,CAAC,CAAC,CAAC;MAC3G,IAAIe,gBAAgB,CAACC,KAAK,CAACG,8BAA8B,CAAC,IAAI,CAACZ,UAAU,CAACK,SAAS,CAACM,YAAY,CAAClB,CAAC,CAAC,CAAC,EAAE;QAClG,IAAI,CAACS,OAAO,CAACT,CAAC,CAAC,CAACoB,QAAQ,GAAG,IAAI,CAACb,UAAU,CAACK,SAAS,CAACS,eAAe,CAACrB,CAAC,CAAC;QACvE,IAAI,CAACS,OAAO,CAACT,CAAC,CAAC,CAACsB,WAAW,GAAG,IAAI;MACtC;MACA,IAAIP,gBAAgB,CAACC,KAAK,CAACO,0BAA0B,CAAC,IAAI,CAAChB,UAAU,CAACK,SAAS,CAACM,YAAY,CAAClB,CAAC,CAAC,CAAC,EAAE;QAC9FQ,IAAI,GAAG,IAAI;MACf;IACJ;IAEA,IAAIA,IAAI,EAAE;MACN,IAAI,CAACgB,QAAQ,CAAChB,IAAI,CAAC,CAACiB,CAAC,EAAEC,CAAC,KAAK;QACzB,IAAIC,MAAM,GAAG,IAAI,CAAClB,OAAO,CAACmB,OAAO,CAACH,CAAC,CAAC;QACpC,IAAII,MAAM,GAAG,IAAI,CAACpB,OAAO,CAACmB,OAAO,CAACF,CAAC,CAAC;QACpC,IAAII,YAAY,GAAG,IAAI,CAACvB,UAAU,CAACK,SAAS,CAACmB,YAAY,CAACJ,MAAM,CAAC;QACjE,IAAIK,YAAY,GAAG,IAAI,CAACzB,UAAU,CAACK,SAAS,CAACmB,YAAY,CAACF,MAAM,CAAC;QAEjE,OAAOC,YAAY,GAAGE,YAAY;MACtC,CAAC,CAAC;IACN;IAEA,IAAI,CAACzB,UAAU,CAACK,SAAS,CAACqB,iBAAiB,CAAC,CAAC;EACjD;EAEA7C,cAAcA,CAAE8C,QAAQ,EAAEC,OAAO,EAAE;IAC/B,IAAI,CAAC,IAAI,CAACzF,KAAK,EAAE;MACb;IACJ;IACA,IAAIsD,CAAC,GAAG,IAAI,CAACtD,KAAK,CAACiC,OAAO,CAACkB,GAAG,CAACqC,QAAQ,CAAC;IAExC,IAAI,CAAClC,CAAC,EAAE;MACJ;IACJ;IAEA,IAAIoC,CAAC,GAAG,IAAI,CAAC1F,KAAK,CAAC4C,QAAQ,CAACW,QAAQ,CAACkC,OAAO,CAAC;IAC7C,IAAI,CAACC,CAAC,EAAE;MACJ;IACJ;IAEAA,CAAC,CAAClC,IAAI,CAACF,CAAC,CAAC;EACb;EAEAqC,KAAKA,CAAEC,EAAE,EAAEC,IAAI,EAAEC,IAAI,EAAE;IACnB,IAAI,CAAC,IAAI,CAAC9F,KAAK,EAAE;MACb,OAAO,KAAK;IAChB;IACA,IAAI+F,WAAW,GAAG,EAAE;IACpB,IAAI,CAAC/F,KAAK,CAAC+D,OAAO,CAAC7B,OAAO,CAAE8D,CAAC,IAAG;MAC5BD,WAAW,CAACE,IAAI,CAACD,CAAC,CAACE,IAAI,CAAC;IAC5B,CAAC,CAAC;IACF,IAAI5C,CAAC,GAAG,IAAI,CAACtD,KAAK,CAACmG,gBAAgB,CAACP,EAAE,CAAC;IACvC,IAAI,CAACtC,CAAC,EAAE;MACJ,OAAO,KAAK;IAChB;IAEA,MAAM8C,YAAY,GAAG,CAAC;IACtB,MAAMC,UAAU,GAAG,CAAC;IACpB,MAAM3B,QAAQ,GAAGpB,CAAC,CAACoB,QAAQ;IAE3B,IAAIxG,IAAI,GAAGwG,QAAQ,CAAC,CAAC,CAAC;IACtB,IAAItG,KAAK,GAAGsG,QAAQ,CAAC,CAAC,CAAC;IACvB,IAAIvG,GAAG,GAAGuG,QAAQ,CAAC,CAAC,CAAC;IACrB,IAAIrG,MAAM,GAAGqG,QAAQ,CAAC,CAAC,CAAC;IAExB,KAAK,IAAIlD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAE,EAAEA,CAAC,EAAE;MACxB,IAAId,CAAC,GAAGgE,QAAQ,CAAC0B,YAAY,GAAG5E,CAAC,GAAG6E,UAAU,CAAC;MAC/C,IAAIrF,CAAC,GAAG0D,QAAQ,CAAC0B,YAAY,GAAG5E,CAAC,GAAG6E,UAAU,GAAG,CAAC,CAAC;MAEnD,IAAI3F,CAAC,GAAGxC,IAAI,EAAE;QACVA,IAAI,GAAGwC,CAAC;MACZ;MACA,IAAIA,CAAC,GAAGtC,KAAK,EAAE;QACXA,KAAK,GAAGsC,CAAC;MACb;MACA,IAAIM,CAAC,GAAG7C,GAAG,EAAE;QACTA,GAAG,GAAG6C,CAAC;MACX;MACA,IAAIA,CAAC,GAAG3C,MAAM,EAAE;QACZA,MAAM,GAAG2C,CAAC;MACd;IACJ;IAEA,IAAIsF,OAAO,GAAGhD,CAAC,CAACiD,cAAc,CAACC,EAAE,GAAGX,IAAI;IACxC,IAAIY,OAAO,GAAGnD,CAAC,CAACiD,cAAc,CAACG,EAAE,GAAGZ,IAAI;IACxC,IAAIU,EAAE,GAAG,CAACF,OAAO,GAAGhD,CAAC,CAACiD,cAAc,CAACxB,CAAC;IACtC,IAAI2B,EAAE,GAAG,CAACD,OAAO,GAAGnD,CAAC,CAACiD,cAAc,CAACI,CAAC;IAEtC,OAASzI,IAAI,IAAIsI,EAAE,IAAMA,EAAE,IAAIpI,KAAM,IAAKD,GAAG,IAAIuI,EAAG,IAAKA,EAAE,IAAIrI,MAAO;EAC1E;EAEAO,QAAQA,CAAA,EAAE;IACN,IAAIgI,GAAG,GAAGxG,MAAM;IAChB,IAAIyG,GAAG,GAAGD,GAAG,CAAC,UAAU,CAAC;IACzB,IAAIE,EAAE,GAAGF,GAAG,CAACG,SAAS;IACtB,IAAIC,EAAE,GAAGF,EAAE,CAACG,SAAS,CAACC,WAAW,CAAC,CAAC;IAEnC,SAASC,IAAIA,CAACC,MAAM,EAAE;MACpB,OAAOA,MAAM,CAACD,IAAI,CAACH,EAAE,CAAC;IACxB;IACA,IAAIK,SAAS,GAAGF,IAAI,CAAC,aAAa,CAAC,IAAI,QAAQ,CAACA,IAAI,CAACL,EAAE,CAACQ,QAAQ,GAAG,EAAE,CAAC;IACtE,IAAIC,QAAQ,GAAG,CAACF,SAAS,IAAIF,IAAI,CAAC,aAAa,CAAC;IAChD,IAAIK,UAAU,GAAGL,IAAI,CAAC,eAAe,CAAC;IAEtC,IAAIM,MAAM,GAAG;MACTJ,SAAS,EAAEA,SAAS;MACpBE,QAAQ,EAAEA,QAAQ;MAClBC,UAAU,EAAEA;IAChB,CAAC;IACD,IAAIE,eAAe,GAAGd,GAAG,CAAC5H,QAAQ,CAAC0I,eAAe;IAClD,KAAK,IAAIlG,CAAC,IAAIiG,MAAM,EAAE;MAClB,IAAIA,MAAM,CAACjG,CAAC,CAAC,EAAE;QACXkG,eAAe,CAACjF,SAAS,IAAI,GAAG,GAAGjB,CAAC,CAACmG,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAACT,WAAW,CAAC,CAAC;MACxE;IACJ;IACA,OAAOO,MAAM,CAACJ,SAAS,IAAII,MAAM,CAACF,QAAQ,IAAIE,MAAM,CAACD,UAAU;EACnE;AAEJ;AAEA,eAAe5J,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}